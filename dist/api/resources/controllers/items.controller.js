import Joi from 'joi';
import Items from '../models/items.model';

export default {
  //@ insert data with validation
  create: async (req, res) => {

    try {
      const schema = Joi.object().keys({
        name: Joi.string().required(),
        url: Joi.string().required(),
        city: Joi.string().required(),
        location: Joi.string().required()

      });
      const { value, error } = Joi.validate(req.body, schema);
      if (error && error.details) {
        return res.status(400).json(error);
      }
      const items = await Items.create(value);
      return res.json(items);
    } catch (err) {
      console.error(err);
      return res.status(500).send(err);
    }
  },
  //@ get all record's
  async getAllRecords(req, res) {
    try {
      const { page, perPage } = req.query;
      const options = {
        page: parseInt(page, 10) || 1,
        limit: parseInt(perPage, 10) || 10
      };
      const items = await Items.paginate({}, options);
      return res.json(items);
    } catch (err) {
      console.error(err);
      return res.status(500).send(err);
    }
  },
  //@ Insert Staic record's
  async insertSaticData(req, res) {
    try {
      for (let i = 1; i <= 100; i++) {

        var dataObj = {
          "name": "Product " + i,
          "url": "https://bit.ly/2OC7hJx",
          "city": "surat",
          "location": "Hirabaugh, Surat, Gujarat"
        };

        var items = await Items.create(dataObj);
      }
      return res.json(items);
    } catch (err) {
      console.error(err);
      return res.status(500).send(err);
    }
  }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvcmVzb3VyY2VzL2NvbnRyb2xsZXJzL2l0ZW1zLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiSm9pIiwiSXRlbXMiLCJjcmVhdGUiLCJyZXEiLCJyZXMiLCJzY2hlbWEiLCJvYmplY3QiLCJrZXlzIiwibmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwidXJsIiwiY2l0eSIsImxvY2F0aW9uIiwidmFsdWUiLCJlcnJvciIsInZhbGlkYXRlIiwiYm9keSIsImRldGFpbHMiLCJzdGF0dXMiLCJqc29uIiwiaXRlbXMiLCJlcnIiLCJjb25zb2xlIiwic2VuZCIsImdldEFsbFJlY29yZHMiLCJwYWdlIiwicGVyUGFnZSIsInF1ZXJ5Iiwib3B0aW9ucyIsInBhcnNlSW50IiwibGltaXQiLCJwYWdpbmF0ZSIsImluc2VydFNhdGljRGF0YSIsImkiLCJkYXRhT2JqIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxHQUFQLE1BQWdCLEtBQWhCO0FBQ0EsT0FBT0MsS0FBUCxNQUFrQix1QkFBbEI7O0FBR0EsZUFBZTtBQUNiO0FBQ0NDLFVBQVEsT0FBTUMsR0FBTixFQUFXQyxHQUFYLEtBQW1COztBQUUxQixRQUFJO0FBQ0YsWUFBTUMsU0FBU0wsSUFBSU0sTUFBSixHQUFhQyxJQUFiLENBQWtCO0FBQy9CQyxjQUFNUixJQUFJUyxNQUFKLEdBQWFDLFFBQWIsRUFEeUI7QUFFL0JDLGFBQUtYLElBQUlTLE1BQUosR0FBYUMsUUFBYixFQUYwQjtBQUcvQkUsY0FBTVosSUFBSVMsTUFBSixHQUFhQyxRQUFiLEVBSHlCO0FBSS9CRyxrQkFBVWIsSUFBSVMsTUFBSixHQUFhQyxRQUFiOztBQUpxQixPQUFsQixDQUFmO0FBT0EsWUFBTSxFQUFFSSxLQUFGLEVBQVNDLEtBQVQsS0FBbUJmLElBQUlnQixRQUFKLENBQWFiLElBQUljLElBQWpCLEVBQXVCWixNQUF2QixDQUF6QjtBQUNBLFVBQUlVLFNBQVNBLE1BQU1HLE9BQW5CLEVBQTRCO0FBQzFCLGVBQU9kLElBQUllLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQkwsS0FBckIsQ0FBUDtBQUNEO0FBQ0QsWUFBTU0sUUFBUSxNQUFNcEIsTUFBTUMsTUFBTixDQUFhWSxLQUFiLENBQXBCO0FBQ0EsYUFBT1YsSUFBSWdCLElBQUosQ0FBU0MsS0FBVCxDQUFQO0FBQ0QsS0FkRCxDQWNFLE9BQU9DLEdBQVAsRUFBWTtBQUNaQyxjQUFRUixLQUFSLENBQWNPLEdBQWQ7QUFDQSxhQUFPbEIsSUFBSWUsTUFBSixDQUFXLEdBQVgsRUFBZ0JLLElBQWhCLENBQXFCRixHQUFyQixDQUFQO0FBQ0Q7QUFDRixHQXRCWTtBQXVCYjtBQUNBLFFBQU1HLGFBQU4sQ0FBb0J0QixHQUFwQixFQUF5QkMsR0FBekIsRUFBOEI7QUFDNUIsUUFBSTtBQUNGLFlBQU0sRUFBRXNCLElBQUYsRUFBUUMsT0FBUixLQUFvQnhCLElBQUl5QixLQUE5QjtBQUNBLFlBQU1DLFVBQVU7QUFDZEgsY0FBTUksU0FBU0osSUFBVCxFQUFlLEVBQWYsS0FBc0IsQ0FEZDtBQUVkSyxlQUFPRCxTQUFTSCxPQUFULEVBQWtCLEVBQWxCLEtBQXlCO0FBRmxCLE9BQWhCO0FBSUEsWUFBTU4sUUFBUSxNQUFNcEIsTUFBTStCLFFBQU4sQ0FBZSxFQUFmLEVBQW1CSCxPQUFuQixDQUFwQjtBQUNBLGFBQU96QixJQUFJZ0IsSUFBSixDQUFTQyxLQUFULENBQVA7QUFDRCxLQVJELENBUUUsT0FBT0MsR0FBUCxFQUFZO0FBQ1pDLGNBQVFSLEtBQVIsQ0FBY08sR0FBZDtBQUNBLGFBQU9sQixJQUFJZSxNQUFKLENBQVcsR0FBWCxFQUFnQkssSUFBaEIsQ0FBcUJGLEdBQXJCLENBQVA7QUFDRDtBQUNGLEdBckNZO0FBc0NiO0FBQ0EsUUFBTVcsZUFBTixDQUFzQjlCLEdBQXRCLEVBQTBCQyxHQUExQixFQUE4QjtBQUM3QixRQUFJO0FBQ0QsV0FBSSxJQUFJOEIsSUFBRSxDQUFWLEVBQVlBLEtBQUcsR0FBZixFQUFtQkEsR0FBbkIsRUFBdUI7O0FBRXRCLFlBQUlDLFVBQVU7QUFDakIsa0JBQU8sYUFBV0QsQ0FERDtBQUVqQixpQkFBTSx3QkFGVztBQUdqQixrQkFBTyxPQUhVO0FBSWpCLHNCQUFXO0FBSk0sU0FBZDs7QUFPQSxZQUFJYixRQUFRLE1BQU1wQixNQUFNQyxNQUFOLENBQWFpQyxPQUFiLENBQWxCO0FBRUQ7QUFDRCxhQUFPL0IsSUFBSWdCLElBQUosQ0FBU0MsS0FBVCxDQUFQO0FBRUEsS0FmRixDQWVHLE9BQU9DLEdBQVAsRUFBWTtBQUNaQyxjQUFRUixLQUFSLENBQWNPLEdBQWQ7QUFDQSxhQUFPbEIsSUFBSWUsTUFBSixDQUFXLEdBQVgsRUFBZ0JLLElBQWhCLENBQXFCRixHQUFyQixDQUFQO0FBQ0Q7QUFDRjs7QUEzRFksQ0FBZiIsImZpbGUiOiJpdGVtcy5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IEl0ZW1zIGZyb20gJy4uL21vZGVscy9pdGVtcy5tb2RlbCc7XG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICAvL0AgaW5zZXJ0IGRhdGEgd2l0aCB2YWxpZGF0aW9uXG4gICBjcmVhdGU6IGFzeW5jKHJlcSwgcmVzKSA9PiB7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3QoKS5rZXlzKHtcbiAgICAgICAgbmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgIHVybDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgIGNpdHk6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgICAgICBsb2NhdGlvbjogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgIFxuICAgICAgfSk7XG4gICAgICBjb25zdCB7IHZhbHVlLCBlcnJvciB9ID0gSm9pLnZhbGlkYXRlKHJlcS5ib2R5LCBzY2hlbWEpO1xuICAgICAgaWYgKGVycm9yICYmIGVycm9yLmRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgSXRlbXMuY3JlYXRlKHZhbHVlKTtcbiAgICAgIHJldHVybiByZXMuanNvbihpdGVtcyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKTtcbiAgICB9XG4gIH0sXG4gIC8vQCBnZXQgYWxsIHJlY29yZCdzXG4gIGFzeW5jIGdldEFsbFJlY29yZHMocmVxLCByZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBwYWdlLCBwZXJQYWdlIH0gPSByZXEucXVlcnk7XG4gICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBwYWdlOiBwYXJzZUludChwYWdlLCAxMCkgfHwgMSxcbiAgICAgICAgbGltaXQ6IHBhcnNlSW50KHBlclBhZ2UsIDEwKSB8fCAxMCxcbiAgICAgIH07XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IEl0ZW1zLnBhZ2luYXRlKHt9LCBvcHRpb25zKTtcbiAgICAgIHJldHVybiByZXMuanNvbihpdGVtcyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKTtcbiAgICB9XG4gIH0sXG4gIC8vQCBJbnNlcnQgU3RhaWMgcmVjb3JkJ3NcbiAgYXN5bmMgaW5zZXJ0U2F0aWNEYXRhKHJlcSxyZXMpe1xuICAgdHJ5IHtcbiAgICAgIGZvcihsZXQgaT0xO2k8PTEwMDtpKyspe1xuICAgICBcbiAgICAgICB2YXIgZGF0YU9iaiA9IHtcbiAgICBcIm5hbWVcIjpcIlByb2R1Y3QgXCIraSxcbiAgICBcInVybFwiOlwiaHR0cHM6Ly9iaXQubHkvMk9DN2hKeFwiLFxuICAgIFwiY2l0eVwiOlwic3VyYXRcIixcbiAgICBcImxvY2F0aW9uXCI6XCJIaXJhYmF1Z2gsIFN1cmF0LCBHdWphcmF0XCJcbn1cbiAgXG4gICAgICAgdmFyIGl0ZW1zID0gYXdhaXQgSXRlbXMuY3JlYXRlKGRhdGFPYmopO1xuICAgICAgIFxuICAgICB9XG4gICAgIHJldHVybiByZXMuanNvbihpdGVtcyk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChlcnIpO1xuICAgIH1cbiAgfVxuXG59O1xuIl19